{# Load the tag library #}
{% load bootstrap3 %}

{# Load CSS and JavaScript #}
{% bootstrap_css %}
{% bootstrap_javascript jquery=1 %}

{# Display django.contrib.messages as Bootstrap alerts #}
{% bootstrap_messages %}


    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.0/css/jquery.dataTables.css" />
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/plug-ins/9dcbecd42ad/integration/bootstrap/3/dataTables.bootstrap.css" />

    <style type="text/css">
        .dataTables_wrapper .dataTables_paginate .paginate_button {padding: 0; margin: 0;}
    </style>

    <script src="//cdn.datatables.net/1.10.0/js/jquery.dataTables.js"></script>
    <script src="//cdn.datatables.net/plug-ins/9dcbecd42ad/integration/bootstrap/3/dataTables.bootstrap.js"></script>

    <script type="text/javascript">
    $(document).ready(function() {

        var oTable = $('#datatable').dataTable({
            "order": [[ 1, "desc" ], [ 0, "desc" ]],
            "lengthMenu": [[25, 50, 100, 200], [25, 50, 100, 200]],
            "columnDefs": [
                { "orderable": true, "searchable": true, "targets": [ 0, 1 ] },
                { "orderable": true, "searchable": false, "targets": [ 2 ] },
                { "orderable": true, "searchable": false, "className": "center", "targets": [ 3 ] },
            ],
            "searching": true,
            "processing": true,
            "serverSide": true,
            "stateSave": true,
            "ajax": {
                url: "{% url 'data' %}",
                type: 'GET',
            }
        });
    });
    </script>

<div class="container">

    <div class="row">

        <div class="col-md-12">
            <h1>Contact list</h1>
        </div>

        <div class="col-md-6">

            <div class="dropdown">
                <button class="btn btn-default dropdown-toggle" type="button" id="MenuContactActions" data-toggle="dropdown">
                    Actions
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu" aria-labelledby="MenuContactActions">
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/contacts/add/">New contact</a></li>
                </ul>
            </div>

        </div>

        <div class="col-md-6">

            {% if contacts %}
                <ul class="list-group">
                {% for contact in contacts %}
                    <li class="list-group-item">
                        <span class="badge">{{ contact.position.name }} | {{ contact.create_date|date:"D d M Y" }}</span>
                        {% bootstrap_icon "star" %}
                        <a href="/contacts/{{ contact.id }}/">{{ contact.first_name }} {{ contact.last_name }}</a></li>
                {% endfor %}
                </ul>
            {% else %}
                <p>No contacts are available.</p>
            {% endif %}

        </div>

        <div class="col-md-12">
            <table id="datatable" class="table table-striped table-bordered">
                <thead>
                    <th>First name</th>
                    <th>Last name</th>
                    <th>Position</th>
                    <th>Creation date</th>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>

    </div>
</div>
